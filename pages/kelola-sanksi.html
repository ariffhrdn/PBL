<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/apple-icon.png">
  <link rel="icon" type="image/png" href="../assets/img/logos/logopolinema.png">
  <title>
    Kelola Sanksi - Sistem Tata Tertib
  </title>
  <!--     Fonts and icons     -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
  <!-- Nucleo Icons -->
  <link href="https://demos.creative-tim.com/argon-dashboard-pro/assets/css/nucleo-icons.css" rel="stylesheet" />
  <link href="https://demos.creative-tim.com/argon-dashboard-pro/assets/css/nucleo-svg.css" rel="stylesheet" />
  <!-- Font Awesome Icons -->
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <!-- CSS Files -->
  <link id="pagestyle" href="../assets/css/argon-dashboard.css?v=2.1.0" rel="stylesheet" />
</head>

<body class="g-sidenav-show   bg-gray-100">
  <div class="min-height-300 bg-dark position-absolute w-100"></div>
  <aside class="sidenav bg-white navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-4 " id="sidenav-main">
    <div class="sidenav-header">
      <i class="fas fa-times p-3 cursor-pointer text-secondary opacity-5 position-absolute end-0 top-0 d-none d-xl-none" aria-hidden="true" id="iconSidenav"></i>
      <a class="navbar-brand m-0" href="dashboard.html" target="_blank">
        <img src="../assets/img/logos/logopolinema.png" width="26px" height="26px" class="navbar-brand-img h-100" alt="main_logo">
        <span class="ms-1 font-weight-bold">Sistem Tata Tertib</span>
      </a>
    </div>
    <hr class="horizontal dark mt-0">
    <div class="collapse navbar-collapse  w-auto " id="sidenav-collapse-main">
      <ul class="navbar-nav">
        <!-- Dashboard -->
        <li class="nav-item">
          <a class="nav-link active" href="dashboard.html">
            <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
              <i class="ni ni-tv-2 text-dark text-sm opacity-10"></i>
            </div>
            <span class="nav-link-text ms-1">Dashboard</span>
          </a>
        </li>
  
        <!-- sanksi(semua aktor dapat mengakses) -->
        <li class="nav-item">
          <a class="nav-link" href="tata-tertib.html">
            <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
              <i class="ni ni-document-text text-dark text-sm opacity-10"></i>
            </div>
            <span class="nav-link-text ms-1">Tata Tertib</span>
          </a>
        </li>
  
        <!-- Sanksi (semua aktor dapat mengakses) -->
        <li class="nav-item">
          <a class="nav-link" href="sanksi.html">
            <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
              <i class="ni ni-warning text-dark text-sm opacity-10"></i>
            </div>
            <span class="nav-link-text ms-1">Sanksi</span>
          </a>
        </li>
  
        <!-- Laporan Pelanggaran (Dosen dan Admin dapat melaporkan pelanggaran) -->
        <li class="nav-item">
          <a class="nav-link" href="laporan-pelanggaran.html">
            <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
              <i class="ni ni-bell text-dark text-sm opacity-10"></i>
            </div>
            <span class="nav-link-text ms-1">Laporan Pelanggaran</span>
          </a>
        </li>
  
        <!-- Fitur Admin -->
<li class="nav-item mt-3">
  <h6 class="ps-4 ms-2 text-uppercase text-xs font-weight-bolder opacity-6">Admin</h6>
</li>

<!-- Mengelola sanksi(Admin) -->
<li class="nav-item">
  <a class="nav-link" href="kelola-tata-tertib.html">
    <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
      <i class="ni ni-settings-gear-65 text-dark text-sm opacity-10"></i>
    </div>
    <span class="nav-link-text ms-1">Kelola Tata Tertib</span>
  </a>
</li>

<!-- Mengelola Sanksi (Admin) -->
<li class="nav-item">
  <a class="nav-link" href="kelola-sanksi.html">
    <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
      <i class="ni ni-settings-gear-65 text-dark text-sm opacity-10"></i>
    </div>
    <span class="nav-link-text ms-1">Kelola Sanksi</span>
  </a>
</li>

<!-- Logout (Admin) -->
<li class="nav-item">
  <a class="nav-link" href="logout.html">
    <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
      <i class="ni ni-user-run text-dark text-sm opacity-10"></i>
    </div>
    <span class="nav-link-text ms-1">Logout</span>
  </a>
</li>
</ul>
</div>
</aside>


  <!-- Main content -->
  <main class="main-content position-relative border-radius-lg">
    <!-- Navbar -->
    <nav class="navbar navbar-main navbar-expand-lg px-0 mx-4 shadow-none border-radius-xl" id="navbarBlur" data-scroll="false">
      <div class="container-fluid py-1 px-3">
        <!-- Breadcrumb -->
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb bg-transparent mb-0 pb-0 pt-1 px-0 me-sm-6 me-5">
            <li class="breadcrumb-item text-sm"><a class="opacity-5 text-white" href="javascript:;">Pages</a></li>
            <li class="breadcrumb-item text-sm text-white active" aria-current="page">Kelola Sanksi</li>
          </ol>
          <h6 class="font-weight-bolder text-white mb-0">Sistem Tata Tertib - Kelola Sanksi</h6>
        </nav>
        <!-- Navbar content -->
        <div class="collapse navbar-collapse mt-sm-0 mt-2 me-md-0 me-sm-4" id="navbar">
          <div class="ms-md-auto pe-md-3 d-flex align-items-center">
            <div class="input-group">
              <span class="input-group-text text-body"><i class="fas fa-search" aria-hidden="true"></i></span>
              <input type="text" class="form-control" placeholder="Cari sanksiatau Laporan...">
            </div>
          </div>
        </div>
      </div>
    </nav>

   <!-- Akumulasi Sanksi Pelanggaran -->
<div class="d-flex justify-content-center mt-4">
  <div class="col-md-10">
    <div class="card">
      <div class="card-header bg-primary text-white">
        <h5>Akumulasi Sanksi Pelanggaran</h5>
      </div>
      <div class="card-body">
        <table class="table table-bordered table-hover">
          <thead>
            <tr>
              <th>No</th>
              <th>Deskripsi</th>
              <th>Aksi</th>
            </tr>
          </thead>
          <tbody id="akumulasi-sanksi-body">
            <!-- Data Akumulasi Sanksi Pelanggaran akan dimasukkan di sini -->
          </tbody>
        </table>
        <button class="btn btn-success mt-3" onclick="tambahAkumulasiSanksi()">Tambah Sanksi</button>
      </div>
    </div>
  </div>
</div>

<!-- Sanksi Pelanggaran -->
<div class="d-flex justify-content-center mt-4">
  <div class="col-md-10">
    <div class="card">
      <div class="card-header bg-primary text-white">
        <h5>Sanksi Pelanggaran</h5>
      </div>
      <div class="card-body">
        <table class="table table-bordered table-hover">
          <thead>
            <tr>
              <th>No</th>
              <th>Tingkat Pelanggaran</th>
              <th>Deskripsi</th>
              <th>Aksi</th>
            </tr>
          </thead>
          <tbody id="sanksi-pelanggaran-body">
            <!-- Data Sanksi Pelanggaran akan dimasukkan di sini -->
          </tbody>
        </table>
        <button class="btn btn-success mt-3" onclick="tambahSanksiPelanggaran()">Tambah Sanksi</button>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    loadDataFromLocalStorage();
    loadSanksiPelanggaranData();
  });

  // Function for adding "Akumulasi Sanksi"
  function tambahAkumulasiSanksi() {
    const tableBody = document.getElementById('akumulasi-sanksi-body');
    const rowCount = tableBody.rows.length;

    const newRow = document.createElement('tr');
    newRow.innerHTML = `
      <td>${rowCount + 1}</td>
      <td contenteditable="true" onfocus="handleFocus(this)" onblur="handleBlur(this)">Deskripsi...</td>
      <td>
        <button class="btn btn-sm btn-primary" onclick="simpanBaris(this)">Simpan</button>
      </td>
    `;
    tableBody.appendChild(newRow);
    newRow.cells[1].focus();
  }

  function handleFocus(element) {
    if (element.textContent === "Deskripsi...") {
      element.textContent = "";
    }
  }

  function handleBlur(element) {
    if (element.textContent.trim() === "") {
      element.textContent = "Deskripsi...";
    }
  }

  function simpanBaris(button) {
    const row = button.closest('tr');
    const deskripsiCell = row.cells[1];

    if (deskripsiCell.textContent.trim() === "" || deskripsiCell.textContent === "Deskripsi...") {
      alert("Deskripsi tidak boleh kosong.");
      return;
    }

    row.cells[2].innerHTML = `
      <button class="btn btn-sm btn-primary" onclick="editBaris(this)">Edit</button>
      <button class="btn btn-sm btn-danger" onclick="hapusBaris(this)">Hapus</button>
    `;
    saveDataToLocalStorage();
  }

  function editBaris(button) {
    const row = button.closest('tr');
    const deskripsiCell = row.cells[1];
    const aksiCell = row.cells[2];

    deskripsiCell.setAttribute('contenteditable', 'true');
    deskripsiCell.focus();

    aksiCell.innerHTML = `<button class="btn btn-sm btn-primary" onclick="simpanBaris(this)">Simpan</button>`;
  }

  function hapusBaris(button) {
    button.closest('tr').remove();
    updateRowNumbers();
    saveDataToLocalStorage();
  }

  function updateRowNumbers() {
    const tableBody = document.getElementById('akumulasi-sanksi-body');
    Array.from(tableBody.rows).forEach((row, index) => {
      row.cells[0].textContent = index + 1;
    });
  }

  function saveDataToLocalStorage() {
    const tableBody = document.getElementById('akumulasi-sanksi-body');
    const data = Array.from(tableBody.rows).map(row => ({
      deskripsi: row.cells[1].textContent,
    }));
    localStorage.setItem('akumulasiSanksiData', JSON.stringify(data));
  }

  function loadDataFromLocalStorage() {
    const savedData = localStorage.getItem('akumulasiSanksiData');
    if (savedData) {
      const tableBody = document.getElementById('akumulasi-sanksi-body');
      const data = JSON.parse(savedData);
      tableBody.innerHTML = '';
      data.forEach((item, index) => {
        const newRow = document.createElement('tr');
        newRow.innerHTML = `
          <td>${index + 1}</td>
          <td>${item.deskripsi}</td>
          <td>
            <button class="btn btn-sm btn-primary" onclick="editBaris(this)">Edit</button>
            <button class="btn btn-sm btn-danger" onclick="hapusBaris(this)">Hapus</button>
          </td>
        `;
        tableBody.appendChild(newRow);
      });
    }
  }

  // Function for adding "Sanksi Pelanggaran"
  function tambahSanksiPelanggaran() {
    const tableBody = document.getElementById('sanksi-pelanggaran-body');
    const rowCount = tableBody.rows.length;

    const newRow = document.createElement('tr');
    newRow.innerHTML = `
      <td>${rowCount + 1}</td>
      <td contenteditable="true">Tingkat Pelanggaran...</td>
      <td contenteditable="true">Deskripsi...</td>
      <td>
        <button class="btn btn-sm btn-primary" onclick="simpanSanksiPelanggaran(this)">Simpan</button>
      </td>
    `;
    tableBody.appendChild(newRow);
  }

  function simpanSanksiPelanggaran(button) {
    const row = button.closest('tr');
    const tingkatCell = row.cells[1];
    const deskripsiCell = row.cells[2];

    if (tingkatCell.textContent.trim() === "Tingkat Pelanggaran..." || deskripsiCell.textContent.trim() === "Deskripsi...") {
      alert("Tingkat Pelanggaran dan Deskripsi tidak boleh kosong.");
      return;
    }

    row.cells[3].innerHTML = `
      <button class="btn btn-sm btn-primary" onclick="editSanksiPelanggaran(this)">Edit</button>
      <button class="btn btn-sm btn-danger" onclick="hapusSanksiPelanggaran(this)">Hapus</button>
    `;
    saveSanksiPelanggaranData();
  }

  function editSanksiPelanggaran(button) {
    const row = button.closest('tr');
    const tingkatCell = row.cells[1];
    const deskripsiCell = row.cells[2];
    const aksiCell = row.cells[3];

    tingkatCell.setAttribute('contenteditable', 'true');
    deskripsiCell.setAttribute('contenteditable', 'true');
    tingkatCell.focus();

    aksiCell.innerHTML = `<button class="btn btn-sm btn-primary" onclick="simpanSanksiPelanggaran(this)">Simpan</button>`;
  }

  function hapusSanksiPelanggaran(button) {
    button.closest('tr').remove();
    updateSanksiPelanggaranRowNumbers();
    saveSanksiPelanggaranData();
  }

  function updateSanksiPelanggaranRowNumbers() {
    const tableBody = document.getElementById('sanksi-pelanggaran-body');
    Array.from(tableBody.rows).forEach((row, index) => {
      row.cells[0].textContent = index + 1;
    });
  }

  function saveSanksiPelanggaranData() {
    const tableBody = document.getElementById('sanksi-pelanggaran-body');
    const data = Array.from(tableBody.rows).map(row => ({
      tingkat: row.cells[1].textContent,
      deskripsi: row.cells[2].textContent,
    }));
    localStorage.setItem('sanksiPelanggaranData', JSON.stringify(data));
  }

  function loadSanksiPelanggaranData() {
    const savedData = localStorage.getItem('sanksiPelanggaranData');
    if (savedData) {
      const tableBody = document.getElementById('sanksi-pelanggaran-body');
      const data = JSON.parse(savedData);
      tableBody.innerHTML = '';
      data.forEach((item, index) => {
        const newRow = document.createElement('tr');
        newRow.innerHTML = `
          <td>${index + 1}</td>
          <td>${item.tingkat}</td>
          <td>${item.deskripsi}</td>
          <td>
            <button class="btn btn-sm btn-primary" onclick="editSanksiPelanggaran(this)">Edit</button>
            <button class="btn btn-sm btn-danger" onclick="hapusSanksiPelanggaran(this)">Hapus</button>
          </td>
        `;
        tableBody.appendChild(newRow);
      });
    }
  }
</script>

<style>
  /* Atur tabel */
  table {
    width: 100%;
    table-layout: fixed;
    border-collapse: collapse;
  }

  /* Atur semua sel dalam tabel */
  td, th {
    padding: 10px;
    word-wrap: break-word;
    overflow-wrap: break-word;
    text-align: left;
    vertical-align: top;
    border: 1px solid #ddd;
    max-width: 0;
  }

  /* Kolom No */
  table th:first-child, table td:first-child {
    width: 10%; /* Atur lebar kolom No sesuai kebutuhan */
    text-align: center; /* Rata tengah */
  }

/* Kolom Tingkat Pelanggaran */
#sanksi-pelanggaran th:nth-child(2), 
#sanksi-pelanggaran td:nth-child(2) {
  width: 12%; /* Atur ulang lebar kolom */
  text-align: center; /* Rata tengah isi */
}

  /* Kolom Deskripsi */
  table td:nth-child(2), table td:nth-child(3) {
    width: 50%; /* Lebar kolom Deskripsi */
    white-space: normal; /* Bungkus teks */
  }

  /* Kolom Aksi */
  table td:last-child {
    width: -170%; /* Lebar kolom Aksi */
    text-align: center; /* Tombol rata tengah */
  }

  /* Tombol Edit dan Hapus */
  button {
    padding: 5px 10px;
    margin: 2px;
    font-size: 14px;
  }

  /* Hover pada baris untuk efek interaktif */
  tr:hover {
    background-color: #f9f9f9;
  }

  /* Responsive - Tabel pada layar kecil */
  @media screen and (max-width: 768px) {
    table {
      font-size: 12px;
    }
    button {
      font-size: 12px;
    }
  }
</style>
    
  <!-- Scripts -->
  <script src="../assets/js/core/popper.min.js"></script>
  <script src="../assets/js/core/bootstrap.min.js"></script>
  <script src="../assets/js/argon-dashboard.min.js?v=2.1.0"></script>
</body>

</html>